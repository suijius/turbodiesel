Функциональность
================

The value added purpose of the product.  Also…
Connectivity – protocols (e.g. Bluetooth), or re-sync of offline clients
Interoperability – inter-app platform and language independence
Extensibility, Expandability – plugins, late binding
Composability – service or message oriented considerations, governance
Manageability – administration of fielded product
Licensing


Table 1: Architecturally Significant Functional Requirements
Function	Description
Auditing	Provide audit trails of system execution.
Licensing	Provide services for tracking, acquiring, installing, and monitoring license usage.
Localization	Provide facilities for supporting multiple human languages.
Mail	Provide services that allow applications to send and receive mail.
Online help	Provide online help capability.
Printing	Provide facilities for printing.
Reporting	Provide reporting facilities.
Security	Provide services to protect access to certain resources or information.
System management	Provide services that facilitate management of applications in a distributed environment.
Workflow	Provide support for moving documents and other work items, including review and approval cycles.


Security
Confidentiality Preservation, Access Control, Non-repudiation (Integrity Verification, Authenticity Verification – PKI), Identity Verification (logon paradigm), Availability of Service, Auditing Evidence.


Управление доступом
-------------------

Модель безопасности
+++++++++++++++++++

В рамках создания модели управления доступом необходимо реализовать следующие сущности:

- каталог пользователей
- иерархию объектов
- иерархию ролей
- каталог операций
- классы доступа

Иерархия объектов
*****************

Все объекты системы должны составлять иерархию. Корнем дерева является объект - "Любой объект".
Вся иерархия объектов описывает статичскую и динамическую модели. В качестве статической модели выступают атрибуты объекта, а динамической - его состояния или поведение.

.. TODO:
   Описать объекты составляющие иерархическую структуру

Иерархия ролей
**************

Все роли системы должны составлять иерархию. Корнем дерева является роль - "Любая роль".

.. TODO:
   Описать первоначальную иерархию ролей

Каталог операций
****************

Над любым объектом в системе возможны следующие операции:

- Создание
- Просмотр
- Редактирование
- Удаление

Классы доступа
**************

Классом доступа называем набор правил, которые содержат связку операции, объекта и роли.

.. TODO:
   Описать типовые классы доступов

Связь между сущностями модели безопасности
******************************************

- Каждому объекту может соответствовать только один класс доступа.
- Каждому классу может соответствовать несколько объектов.
- Каждому пользователю соответствует по крайней мере одна роль.
- Каждому пользователю может соответствовать несколько ролей, исключая противоречивые назначения в соответствии с иерархией ролей.

Объекты
-------

Как говорилось ранее, корнем дерева объектов является объект - "Любой объект", по большому счету он несет только логическую нагрузку и не обладает собственными характеристиками.

Метаданные
++++++++++

Метаданные - структурированное описание данных, своего рода классификатор. Классификатор, в свою очередь, также должен иметь понятную структуру хранения и доступа к информации.
Сами метаданные должны быть разделены на два типа:

- известные сущности, т.е. данные, структура которых заранее известна и не требует какой-либо универсализации.
- неизвестные сущности, т.е. данные, структура которых различается из приложения в приложение и зависит от контекста задачи

Структура хранения метаданных
*****************************

.. uml::

    Сущность <-- "*" Атрибут
    Атрибут <-- "1" "Тип атрибута"

.. TODO:
   Описать принципы ведения метаданных

Известные сущности
******************

Приложения (Application)
````````````````````````

Ключевая сущность системы. Каждому приложению назначается уникальный номер (суррогатный ключ), при этом псевдоним приложения может и не являться уникальным в рамках системы.
Таким образом возможна ситуация, когда для разных пользователей будут созданы приложения с одинаковым псевдонимом.

+-----------------------+-----------------------------------------------+---------------+-------------------+
| Атрибут               | Описание                                      | Тип атрибута  | Уникальность      |
+=======================+===============================================+===============+===================+
| id                    | Суррогатный ключ                              | Целое число   | Да                |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| name                  | Наименование приложения                       | Строка        | Нет               |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| title                 | Заголовок для отображения на HTML-страницах   | Строка        | Нет               |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| alias                 | Псевдоним, используется в URL                 | Строка        | Нет               |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| logotype              | Картинка, используемая в качестве логотипа    | Картинка      | Нет               |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| default               | Флаг, определяет приложение по умолчанию      | Логический    | Может быть        |
|                       |                                               |               | присвоено только  |
|                       |                                               |               | одному приложению |
+-----------------------+-----------------------------------------------+---------------+-------------------+


.. TODO:
   Описать подробно

Пользователи (User)
```````````````````

Пользователи системы. В формате фреймворка Django, хранение данных делится на две таблицы, связанные как 1:1. Таблица №1 уже есть и ее создавать не надо, более того ее не стоит изменять.
Таблица №2 полностью изменяемая и содержит дополнительные атрибуты пользователя.

+-----------------------+-----------------------------------------------+---------------+-------------------+
| Атрибут               | Описание                                      | Тип атрибута  | Уникальность      |
+=======================+===============================================+===============+===================+
| **Таблица 1 (User)**                                                                                      |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| username              | Логин                                         | Строка        | Да                |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| first_name            | Имя                                           | Строка        | Нет               |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| last_name             | Фамилия                                       | Строка        | Нет               |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| email                 | Адрес электронной почты                       | Строка        | Да                |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| is_staff              | Флаг на принадлежность к администраторам      | Логический    | Нет               |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| is_active             | Флаг указывающий на актуальность записи       | Логический    | Нет               |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| date_joined           | Дата создания записи                          | Дата          | Нет               |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| **Таблица 2  (UserProfile)**                                                                              |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| telephone             | Контактный телефон                            | Строка        | Нет               |
+-----------------------+-----------------------------------------------+---------------+-------------------+

.. TODO:
   Описать подробно

Роли (Rule)
```````````

Роль является группирующей сущностью. С помощью роли возможно описать структуру предприятия либо любую другую структуру, будь то иерархическая или матричная.
Роль является уникальной внутри одного приложения, таким образом образуя составной ключ name-application. Роль может иметь иерархическую структуру. Роль, которая имеет потомком, является группой.

+-----------------------+-----------------------------------------------+---------------+-------------------+
| Атрибут               | Описание                                      | Тип атрибута  | Уникальность      |
+=======================+===============================================+===============+===================+
| id                    | Суррогатный ключ                              | Целое число   | Да                |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| name                  | Наименование роли                             | Строка        | Да, внутри одного |
|                       |                                               |               | приложения        |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| parent                | Ссылка на id другой роли                      | Целое число   | Нет               |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| application           | Приложение                                    | Целое число   | Нет               |
+-----------------------+-----------------------------------------------+---------------+-------------------+

Роль и пользователь находятся в связи многие ко многим, т.е. пользователь может иметь несколько ролей, в тоже время роль может содержать несколько пользователей. Связь эта формируется посредством
связующей таблицы без дополнительных атрибутов.

+-----------------------+-----------------------------------------------+---------------+-------------------+
| Атрибут               | Описание                                      | Тип атрибута  | Уникальность      |
+=======================+===============================================+===============+===================+
| user_id               | id пользователя                               | Целое число   | Нет               |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| rule_id               | id роли                                       | Целое число   | Нет               |
+-----------------------+-----------------------------------------------+---------------+-------------------+

Ограничения ролей:

- Каждая роль может содержать нескольких пользователей
- Каждая группа ролей может иметь в потомках другие роли и иметь пользователей
- Пользователь роли не может иметь роль, которая находится с ней в родстве
- Роли наследуются вниз по дереву

Операции (Operation)
````````````````````

Содержит перечень возможных операций

+-----------------------+-----------------------------------------------+---------------+-------------------+
| Атрибут               | Описание                                      | Тип атрибута  | Уникальность      |
+=======================+===============================================+===============+===================+
| id                    | Суррогатный ключ                              | Целое число   | Да                |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| name                  | Наименование операции                         | Строка        | Да                |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| description           | Описание операции                             | Строка        | Нет               |
+-----------------------+-----------------------------------------------+---------------+-------------------+

.. TODO:
   Описать подробно

Правила доступа (Access)
````````````````````````

+-----------------------+-----------------------------------------------+---------------+-------------------+
| Атрибут               | Описание                                      | Тип атрибута  | Уникальность      |
+=======================+===============================================+===============+===================+
| id                    | Суррогатный ключ                              |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| entity_id             | Тип объекта                                   |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| object_id             | Объект                                        |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| operation_id          | Операция                                      |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| rule_id               | Роль                                          |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+

.. TODO:
   Описать подробно

Картинки (Image)
````````````````

Файлы изображений. Формат изображений значения не имеет.

+-----------------------+-----------------------------------------------+---------------+-------------------+
| Атрибут               | Описание                                      | Тип атрибута  | Уникальность      |
+=======================+===============================================+===============+===================+
| id                    | Суррогатный ключ                              |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| name                  | Наименование приложения                       |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| alias                 | Псевдоним, используется в URL                 |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| application           | Приложение                                    |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| image                 | Путь к образу                                 |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+

Кодовые вставки (Code)
``````````````````````

Кодовые вставки для расширения функциональности.

+-----------------------+-----------------------------------------------+---------------+-------------------+
| Атрибут               | Описание                                      | Тип атрибута  | Уникальность      |
+=======================+===============================================+===============+===================+
| id                    | Суррогатный ключ                              |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| name                  | Наименование приложения                       |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| application           | Приложение                                    |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| code                  | Программный код                               |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| is_global             | Флаг определяющий область видимости           |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+

Шаблоны страниц (Template)
``````````````````````````

Шаблоны HTML-страниц

+-----------------------+-----------------------------------------------+---------------+-------------------+
| Атрибут               | Описание                                      | Тип атрибута  | Уникальность      |
+=======================+===============================================+===============+===================+
| id                    | Суррогатный ключ                              |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| name                  | Наименование приложения                       |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| content               | Содержание шаблона для HTML-страницы          |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+
| application           | Приложение                                    |               |                   |
+-----------------------+-----------------------------------------------+---------------+-------------------+

Страницы приложения (Page)
``````````````````````````

Страницы приложения

+-----------------------+------------------------------------------------+---------------+-------------------+
| Атрибут               | Описание                                       | Тип атрибута  | Уникальность      |
+=======================+================================================+===============+===================+
| id                    | Суррогатный ключ                               |               |                   |
+-----------------------+------------------------------------------------+---------------+-------------------+
| name                  | Наименование приложения                        |               |                   |
+-----------------------+------------------------------------------------+---------------+-------------------+
| title                 | Заголовок для отображения на HTML-страницах    |               |                   |
+-----------------------+------------------------------------------------+---------------+-------------------+
| alias                 | Псевдоним, используется в URL                  |               |                   |
+-----------------------+------------------------------------------------+---------------+-------------------+
| application           | Приложение                                     |               |                   |
+-----------------------+------------------------------------------------+---------------+-------------------+
| template              | Шаблон страницы                                |               |                   |
+-----------------------+------------------------------------------------+---------------+-------------------+
| code                  | Кодовая вставка                                |               |                   |
+-----------------------+------------------------------------------------+---------------+-------------------+
| main                  | Флаг, определяющий главную страницу приложения |               |                   |
+-----------------------+------------------------------------------------+---------------+-------------------+
| description           | Содержание метатэга description                |               |                   |
+-----------------------+------------------------------------------------+---------------+-------------------+
| keywords              | Содержание метатэга keywords                   |               |                   |
+-----------------------+------------------------------------------------+---------------+-------------------+
| content               | Содержание основной области страницы           |               |                   |
+-----------------------+------------------------------------------------+---------------+-------------------+

Связи между известными сущностями
`````````````````````````````````

**Объекты**

.. uml::

    Объекты <|-- Application
    Объекты <|-- Page
    Объекты <|-- Code
    Объекты <|-- Template
    Объекты <|-- "Что-то еще"

**Приложение**

.. uml::

    Application "1" *-- "1..*" Page
    Page -- "0..1" Code
    Page -- "1" Template
    Application o-- "0..*" Rule
    Application o-- "0..*" Code
    Application o-- "0..*" Image
    Application o-- "1..*" Template

**Пользователь**

.. uml::

    User "1" -- "0..1" UserProfile

**Управление доступом**

.. uml::

    Operation "*" -- "*" Access
    Rule "*" -- "*" Access
    User "*" -- "1..*" Rule
    Access "1" -- "0..*" Object
    Rule "*" -- "1" Application
    Application --|> Object

Объект - процесс
++++++++++++++++

Описывает динамическую модель поведения объектов, в том числе самого себя.

.. TODO:
   Описать сущности, составляющие этот объект



